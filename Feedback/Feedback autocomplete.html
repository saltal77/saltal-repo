<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Форма обратной связи</title>
  <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css"/>
  <style>
    body {
      background-color: #fffaf5;
      background-image: url(feedback.png);
      background-position: top right;
      background-repeat: no-repeat;
    }
  </style>
</head>
<body>
<fieldset>
  <label>Город:</label><br/>
  <input id ="city" type="text"  placeholder = "Город"><br/>
  <label>Имя:</label><br/>
  <input name ="name" type="text" class = "names" placeholder = "Имя"><br/>
  <label>Телефон:</label><br/>
  <input name ="tel" type="text" placeholder = "+7(000)000-0000"><br/>
  <label>e-mail:</label><br/>
  <input name ="email" type="text" placeholder = "mail@site.com"><br/>
  <label>Текст:</label><br/>
  <textarea rows="5" cols="15" name="text" placeholder = "Ваше сообщение..."></textarea><br/>
  <button id = 'send'>Отправить</button><br/>
</fieldset>
<div id = 'result'></div>
<script src="js/jquery.js"></script>
<script src="js/jqueryui.min.js"></script>
<script>
  //Автозаполнение поля Город из Json с помощью AJAX - jQueryUI
    $(document).ready(function () {
        var towns = [];
        $.ajax({
            url: 'town.json',
            dataType : "json",
            success: function (data) {
                $.each(data, function(i, val) {
                    towns.push(val.town);
                    $('#city').autocomplete({
                        source: towns,
                        minChars: 3
                    });
                });
            }
        });
    });
//Функция проверки формы
  document.getElementById('send').onclick = function () {
      //Регулярные выражения для проверки полей
      var regExpName = /([a-zA-Z]|[\D])/i;
      var regExpTel = /\+7\(\d{3}\)(\d{3}-\d{4})/i;
      var regExpEmail = /^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/i;
      var regExpText = /\w+|\D+/i;
      //Сбор данных из формы в переменные
      var data = document.querySelectorAll('fieldset input');
      var text = document.querySelector('fieldset textarea');
      //Сброс стиля поле ввода при каждой проверке
      data.forEach(function (item) {
         item.style.border = '';
      });
      text.style.border ='';
      //Проверка на правильное заполнение и вывод положительного результата об отправке
      if(data[0].value && regExpName.test(data[1].value)&& regExpTel.test(data[2].value)&&
          regExpEmail.test(data[3].value)&& regExpText.test(text.value)){
          document.getElementById("result").innerHTML = 'Ваше сообщение отправлено';
          //document.querySelector('fieldset').style.display = 'none';
      }
      //Блок условий & подсказок в случае не правильного заполнения
      else{
          if(!data[0].value){
            document.getElementById("result").innerHTML = 'Не выбран город';
              data[0].style.border = '1px dotted red';
          }
          if(!regExpName.test(data[1].value)){
              document.getElementById("result").innerHTML = 'Имя введено не верно';
              data[1].style.border = '1px dotted red';
          }
          else if(!regExpTel.test(data[2].value)){
              document.getElementById("result").innerHTML = 'Телефон введен не верно';
              data[2].style.border = '1px dotted red';
          }
          else if(!regExpEmail.test(data[3].value)){
              document.getElementById("result").innerHTML = 'Почта введена не верно';
              data[3].style.border = '1px dotted red';
          }
          else if(!regExpText.test(text.value)){
              document.getElementById("result").innerHTML = 'Не введен текст';
              document.querySelector('fieldset textarea').style.border = '1px dotted red';
            }
        }
    }
</script>
</body>
</html>